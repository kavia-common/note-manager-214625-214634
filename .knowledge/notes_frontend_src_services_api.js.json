{"is_source_file": true, "format": "JavaScript", "description": "This file defines an API service class `NotesAPI` that interacts with a RESTful backend to perform CRUD operations on notes. It also provides a fallback mechanism to use local storage if the backend is unavailable. The code includes utility functions for handling JSON responses and constructing fetch requests, and it dynamically determines the API base URL based on environment variables and global window variables.", "external_files": ["./localStore"], "external_methods": ["LocalStore.prototype.list", "LocalStore.prototype.get", "LocalStore.prototype.create", "LocalStore.prototype.update", "LocalStore.prototype.delete"], "published": ["NotesAPI"], "classes": [{"name": "NotesAPI", "description": "A class providing methods to list, retrieve, create, update, and delete notes via a REST API with a fallback to local storage."}], "methods": [{"name": "constructor()", "description": "Initializes the NotesAPI instance and assigns a LocalStore instance for fallback purposes.", "scope": "NotesAPI", "scopeKind": "class"}, {"name": "listNotes()", "description": "Attempts to fetch the list of notes from the REST API; if it fails, returns notes from local storage.", "scope": "NotesAPI", "scopeKind": "class"}, {"name": "getNote(id)", "description": "Fetches a specific note by ID from the REST API or falls back to local storage.", "scope": "NotesAPI", "scopeKind": "class"}, {"name": "createNote(payload)", "description": "Creates a new note by sending data to the REST API or falling back to local storage.", "scope": "NotesAPI", "scopeKind": "class"}, {"name": "updateNote(id, payload)", "description": "Updates an existing note via the REST API or local storage fallback.", "scope": "NotesAPI", "scopeKind": "class"}, {"name": "deleteNote(id)", "description": "Deletes a note via the REST API or local storage fallback.", "scope": "NotesAPI", "scopeKind": "class"}, {"name": "jsonOrError(res)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "tryFetch(path, options)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "jsonOrError", "this.store.list", "this.store.get", "this.store.create", "this.store.update", "this.store.delete"], "search-terms": ["NotesAPI", "tryFetch", "LocalStore", "fallback", "API_BASE", "REST", "CRUD notes", "api.js"], "state": 2, "file_id": 16, "knowledge_revision": 34, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^const API_BASE = (externalBase || envBase || SAME_ORIGIN).replace(\\/\\\\\\/+$\\/, \"\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "NotesAPI", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^export class NotesAPI {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "SAME_ORIGIN", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^const SAME_ORIGIN = \"\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesAPI", "scopeKind": "class"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^  async createNote(payload) {$/", "language": "JavaScript", "kind": "method", "signature": "(payload)", "scope": "NotesAPI", "scopeKind": "class"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^  async deleteNote(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "NotesAPI", "scopeKind": "class"}, {"_type": "tag", "name": "envBase", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^const envBase = (typeof process !== \"undefined\" && process.env && process.env.REACT_APP_API_BASE/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "externalBase", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^const externalBase = typeof window !== \"undefined\" && window.__NOTES_API_BASE__;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^  async getNote(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "NotesAPI", "scopeKind": "class"}, {"_type": "tag", "name": "jsonOrError", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^async function jsonOrError(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^  async listNotes() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesAPI", "scopeKind": "class"}, {"_type": "tag", "name": "tryFetch", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^async function tryFetch(path, options) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options)"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/note-manager-214625-214634/notes_frontend/src/services/api.js", "pattern": "/^  async updateNote(id, payload) {$/", "language": "JavaScript", "kind": "method", "signature": "(id, payload)", "scope": "NotesAPI", "scopeKind": "class"}], "hash": "6bac452194c48b97289d46ee66a89a01", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/services/api.js", "revision_history": [{"34": ""}]}